{"visual":{"name":"lineChartR","displayName":"LineChartR","guid":"lineChartRD902E64560EE4B62A6FFD29B1499B69E","visualClassName":"Visual","version":"1.0.0","description":"","supportUrl":"","gitHubUrl":""},"apiVersion":"1.11.0","author":{"name":"","email":""},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Values","kind":"GroupingOrMeasure","name":"Values"},{"displayName":"Axis","kind":"GroupingOrMeasure","name":"Axis"}],"dataViewMappings":[{"scriptResult":{"dataInput":{"table":{"rows":{"select":[{"for":{"in":"Values"}},{"for":{"in":"Axis"}}],"dataReductionAlgorithm":{"top":{}}}}},"script":{"scriptProviderDefault":"R","scriptOutputType":"html","source":{"objectName":"rcv_script","propertyName":"source"},"provider":{"objectName":"rcv_script","propertyName":"provider"},"scriptSourceDefault":"############### Utility functions ###############\r\nlibraryRequireInstall = function(packageName, ...)\r\n{\r\n  if(!require(packageName, character.only = TRUE)) \r\n    warning(paste(\"*** The package: '\", packageName, \"' was not installed ***\", sep=\"\"))\r\n}\r\n\r\nlibraryRequireInstall(\"XML\")\r\nlibraryRequireInstall(\"htmlwidgets\")\r\n\r\ninternalSaveWidget <- function(widget, fname)\r\n{\r\n  tempFname = paste(fname, \".tmp\", sep=\"\")\r\n  htmlwidgets::saveWidget(widget, file = tempFname, selfcontained = FALSE)\r\n  FlattenHTML(tempFname, fname)\r\n}\r\n\r\nFlattenHTML <- function(fnameIn, fnameOut)\r\n{\r\n  # Read and parse HTML file\r\n  # Embed all js and css files into one unified file\r\n  \r\n  if(!file.exists(fnameIn))\r\n    return(FALSE)\r\n  \r\n  dir = dirname(fnameIn)\r\n  html = htmlTreeParse(fnameIn, useInternal = TRUE)\r\n  top = xmlRoot(html)\r\n  \r\n  # extract all <script> tags with src value\r\n  srcNode=getNodeSet(top, '//script[@src]')\r\n  for (node in srcNode)\r\n  {\r\n    b = xmlAttrs(node)\r\n    fname = file.path(dir, b['src'])\r\n    alternateSrc = FindSrcReplacement(fname)\r\n    if (!is.null(alternateSrc))\r\n    {\r\n      s = alternateSrc\r\n      names(s) = 'src'\r\n      newNode = xmlNode(\"script\",attrs = s)\r\n      replaceNodes(node, newNode)\r\n    }else{\r\n      str=ReadFileForEmbedding(fname);\r\n      if (!is.null(str))\r\n      {      \r\n        newNode = xmlNode(\"script\", str, attrs = c(type = \"text/javascript\"))\r\n        replaceNodes(node, newNode)\r\n      }\r\n    }\r\n  }\r\n  \r\n  # extract all <link> tags with src value\r\n  linkNode=getNodeSet(top, '//link[@href]')\r\n  for (node in linkNode)\r\n  {\r\n    b = xmlAttrs(node)\r\n    fname = file.path(dir, b['href'])\r\n    str = ReadFileForEmbedding(fname, FALSE);\r\n    if (!is.null(str))\r\n    {\r\n      newNode = xmlNode(\"style\", str)\r\n      replaceNodes(node, newNode)\r\n    }\r\n  }\r\n  \r\n  saveXML(html, file = fnameOut)\r\n  return(TRUE)\r\n}\r\n\r\nReadFileForEmbedding <- function(fname, addCdata = TRUE)\r\n{\r\n  data = ReadFullFile(fname)\r\n  if (is.null(data))\r\n    return(NULL)\r\n\r\n  str = paste(data, collapse ='\\n')\r\n  if (addCdata) {\r\n    str = paste(cbind('// <![CDATA[', str,'// ]]>'), collapse ='\\n')\r\n  }\r\n  return(str)\r\n}\r\n\r\nReadFullFile <- function(fname)\r\n{\r\n  if(!file.exists(fname))\r\n    return(NULL)\r\n  \r\n  con = file(fname, open = \"r\")\r\n  data = readLines(con)\r\n  close(con)\r\n  return(data)\r\n}\r\n\r\nFindSrcReplacement <- function(str)\r\n{\r\n  # finds reference to 'plotly' js and replaces with a version from CDN\r\n  # This allows the HTML to be smaller, since this script is not fully embedded in it\r\n  str <- iconv(str, to=\"UTF-8\")\r\n  pattern = \"plotlyjs-(\\\\w.+)/plotly-latest.min.js\"\r\n  match1=regexpr(pattern, str)\r\n  attr(match1, 'useBytes') <- FALSE\r\n  strMatch=regmatches(str, match1, invert = FALSE)\r\n  if (length(strMatch) == 0) return(NULL)\r\n  \r\n  pattern2 = \"-(\\\\d.+)/\"\r\n  match2 = regexpr(pattern2, strMatch[1])\r\n  attr(match2, 'useBytes') <- FALSE\r\n  strmatch = regmatches(strMatch[1], match2)\r\n  if (length(strmatch) == 0) return(NULL)\r\n  \r\n  # CDN url is https://cdn.plot.ly/plotly-<Version>.js\r\n  # This matches the specific version used in the plotly package used.\r\n  verstr = substr(strmatch, 2, nchar(strmatch)-1)\r\n  str = paste('https://cdn.plot.ly/plotly-', verstr,'.min.js', sep='')\r\n  return(str)\r\n}\r\n#################################################\r\n\r\n\r\n############### Library Declarations ###############\r\nlibraryRequireInstall(\"ggplot2\");\r\nlibraryRequireInstall(\"plotly\");\r\nlibraryRequireInstall(\"htmlwidgets\");\r\n####################################################\r\n\r\n################### Actual code ####################\r\ndataFrame <- data.frame(Axis, Values[[1]]);\r\n\r\n#dataFrame[[1]] <- factor(dataFrame[[1]], levels = dataFrame[[1]]) #Forces data to sort by original order. Turns out to be unnecessary, left commented here in case it becomes useful\r\n\r\n#Checking if colour and Threshold Colouring have been set, and setting defaults if not\r\nlineColour = \"#01B8AA\";\r\nreds = c(\"#7f312f\",\"#be4a47\",\"#FD625E\",\"#fd817e\",\"#fea19e\",\"#fec0bf\");\r\ngreens = c(\"#015c55\",\"#018a80\",\"#01B8AA\",\"#34c6bb\",\"#67d4cc\",\"#99e3dd\");\r\nslates = c(\"#1c2325\",\"#293537\",\"#374649\",\"#5f6b6d\",\"#879092\",\"#afb5b6\");\r\nyellows = c(\"#796408\",\"#b6960b\",\"#F2C80F\",\"#f5d33f\",\"#f7de6f\",\"#fae99f\");\r\ngreys = c(\"#303637\",\"#475052\",\"#5F6B6D\",\"#7f898a\",\"#9fa6a7\",\"#bfc4c5\");\r\nblues = c(\"#456a76\",\"#689fb0\",\"#8AD4EB\",\"#a1ddef\",\"#b9e5f3\",\"#d0eef7\");\r\noranges = c(\"#7f4b33\",\"#bf714d\",\"#FE9666\",\"#feab85\",\"#fec0a3\",\"#ffd5c2\");\r\npurples = c(\"#53354d\",\"#7d4f73\",\"#A66999\",\"#b887ad\",\"#caa5c2\",\"#dbc3d6\");\r\nblacks = c(\"#000000\",\"#1a1a1a\",\"#333333\",\"#4a4a4a\",\"#666666\",\"#999999\");\r\n#coloursAll = c(\"#FD625E\",\"#01B8AA\",\"#374649\",\"#F2C80F\",\"#5F6B6D\",\"#8AD4EB\",\"#FE9666\",\"#A66999\",\"#333333\",\"#fea19e\",\"#67d4cc\",\"#879092\",\"#f7de6f\",\"#9fa6a7\",\"#b9e5f3\",\"#fec0a3\",\"#caa5c2\",\"#666666\",\"#7f312f\",\"#015c55\",\"#1c2325\",\"#796408\",\"#303637\",\"#456a76\",\"#7f4b33\",\"#53354d\",\"#000000\");\r\ncolours = reds;\r\ncolourFound = FALSE;\r\nthresholdActive = FALSE;\r\nlegendActive = TRUE;\r\nif(exists(\"ColourSettings_fill\")){\r\n\tlineColour = as.character(ColourSettings_fill);\r\n}\r\nif(exists(\"ColourSettings_thresholdActive\")){\r\n\tthresholdActive = as.logical(ColourSettings_thresholdActive);\r\n}\r\nif(exists(\"Legend_legendActive\")){\r\n\tlegendActive = as.logical(Legend_legendActive);\r\n}\r\n\r\n#Setting colours for multiple lines by iterating through the PowerBI presets of the same shade\r\nif(colourFound == FALSE){\r\n\tif(lineColour %in% reds){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, reds) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = reds;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(reds, -(index)), head(reds, index));\r\n\t\t}\r\n\t}else if(lineColour %in% greens){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, greens) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = greens;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(greens, -(index)), head(greens, index));\r\n\t\t}\r\n\t}else if(lineColour %in% slates){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, slates) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = slates;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(slates, -(index)), head(slates, index));\r\n\t\t}\r\n\t}else if(lineColour %in% yellows){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, yellows) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = yellows;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(yellows, -(index)), head(yellows, index));\r\n\t\t}\r\n\t}else if(lineColour %in% greys){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, greys) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = greys;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(greys, -(index)), head(greys, index));\r\n\t\t}\r\n\t}else if(lineColour %in% blues){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, blues) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = blues;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(blues, -(index)), head(blues, index));\r\n\t\t}\r\n\t}else if(lineColour %in% oranges){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, oranges) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = oranges;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(oranges, -(index)), head(oranges, index));\r\n\t\t}\r\n\t}else if(lineColour %in% purples){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, purples) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = purples;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(purples, -(index)), head(purples, index));\r\n\t\t}\r\n\t}else if(lineColour %in% blacks){\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolourFound == TRUE;\r\n\t\tindex = match(lineColour, blacks) - 1;\r\n\t\tif(index == 0){\r\n\t\t\tcolours = blacks;\r\n\t\t}else{\r\n\t\t\tcolours = c(tail(blacks, -(index)), head(blacks, index));\r\n\t\t}\r\n\t}else{\r\n\t\tp <- plot_ly(Values);\r\n\t\tcolours = c(lineColour,lineColour,lineColour,lineColour,lineColour,lineColour);\r\n\t}\r\n}\r\n#Threshold Colouring\r\nif(thresholdActive){\r\n\r\n\t#Checking if colours and thresholds have been set, and setting defaults if not\r\n\tif(exists(\"ColourSettings_linesActive\")){\r\n\t\tlinesActive = as.logical(ColourSettings_linesActive);\r\n\t}else{\r\n\t\tlinesActive = FALSE;\r\n\t}\r\n\tif(exists(\"ColourSettings_colour0\")){\r\n\t\tthreshold0Colour = as.character(ColourSettings_colour0);\r\n\t}else{\r\n\t\tthreshold0Colour = \"#FD625E\";\r\n\t}\r\n\tif(exists(\"ColourSettings_threshold1\")){\r\n\t\tthreshold1Value = ColourSettings_threshold1;\r\n\t}else{\r\n\t\tthreshold1Value = 40;\r\n\t}\r\n\tif(exists(\"ColourSettings_colour1\")){\r\n\t\tthreshold1Colour = as.character(ColourSettings_colour1);\r\n\t}else{\r\n\t\tthreshold1Colour = \"#F2C80F\";\r\n\t}\r\n\tif(exists(\"ColourSettings_threshold2\")){\r\n\t\tthreshold2Value = ColourSettings_threshold2;\r\n\t}else{\r\n\t\tthreshold2Value = 70;\r\n\t}\r\n\tif(exists(\"ColourSettings_colour2\")){\r\n\t\tthreshold2Colour = as.character(ColourSettings_colour2);\r\n\t}else{\r\n\t\tthreshold2Colour = \"#01B8AA\";\r\n\t}\r\n\t\r\n\tthresholds <- c(-Inf, threshold1Value, threshold2Value, Inf);\r\n\t\r\n\t#Create lines for thresholds if enabled\r\n\tif(linesActive){\r\n\t\tp <- add_trace(p,\r\n\t\t\tx=dataFrame[[1]],\r\n\t\t\ty=threshold1Value,\r\n\t\t\ttype = \"scatter\",\r\n\t\t\tname=\"Threshold 1\",\r\n\t\t\tshowlegend = FALSE,\r\n\t\t\tmode = \"lines\",\r\n\t\t\tline = list(color = \"#000000\"),\r\n\t\t\tevaluate = TRUE\r\n\t\t)\r\n\t\tp <- add_trace(p,\r\n\t\t\tx=dataFrame[[1]],\r\n\t\t\ty=threshold2Value,\r\n\t\t\ttype = \"scatter\",\r\n\t\t\tname=\"Threshold 2\",\r\n\t\t\tshowlegend = FALSE,\r\n\t\t\tmode = \"lines\",\r\n\t\t\tline = list(color = \"#000000\"),\r\n\t\t\tevaluate = TRUE\r\n\t\t)\r\n\t}\r\n\r\n\tfor(cols in 1:ncol(Values)){\r\n\t\tmarkercolours <- c(threshold0Colour,threshold1Colour,threshold2Colour)[findInterval(Values[[cols]], vec=thresholds)];\r\n\t\tif(cols == 1){\r\n\t\t\tp <- add_trace(p,\r\n\t\t\tx = dataFrame[[1]],\r\n\t\t\ty = dataFrame[[2]],\r\n\t\t\ttype = \"scatter\",\r\n\t\t\tmode = \"lines+markers\",\r\n\t\t\tmarker = list(color = markercolours),\r\n\t\t\tline = list(color = colours[[cols]]),\r\n\t\t\tname=colnames(Values)[[cols]],\r\n\t\t\tshowlegend = legendActive)%>%\r\n\t\t\tlayout(margin = list(l = 50, r = 50, b = 150, t = 50, pad = 4));\r\n\t\t}else{\r\n\t\t\tp <- add_trace(p,\r\n\t\t\t\tx=dataFrame[[1]],\r\n\t\t\t\ty=Values[[cols]],\r\n\t\t\t\tdata=Values,\r\n\t\t\t\ttype = \"scatter\",\r\n\t\t\t\tmode = \"lines+markers\",\r\n\t\t\t\tname=colnames(Values)[[cols]],\r\n\t\t\t\tshowlegend = legendActive,\r\n\t\t\t\tmarker = list(color = markercolours),\r\n\t\t\t\tline = list(color = colours[[if(cols %% 6 == 0) 6 else cols %% 6]])\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}else{ #No Threshold Colouring\r\n\tfor(cols in 1:ncol(Values)){\r\n\t\tif(cols == 1){\r\n\t\t\tp <- plot_ly(Values,\r\n\t\t\tx = dataFrame[[1]],\r\n\t\t\ty = dataFrame[[2]],\r\n\t\t\ttype = \"scatter\",\r\n\t\t\tmode = \"lines+markers\",\r\n\t\t\tmarker = list(color = colours[[cols]]),\r\n\t\t\tline = list(color = colours[[cols]]),\r\n\t\t\tshowlegend = legendActive,\r\n\t\t\tname=colnames(Values)[[cols]])%>%\r\n\t\t\tlayout(margin = list(l = 50, r = 50, b = 150, t = 50, pad = 4));\r\n\t\t}else{\r\n\t\t\tp <- add_trace(p,\r\n\t\t\t\tx=dataFrame[[1]],\r\n\t\t\t\ty=Values[[cols]],\r\n\t\t\t\tdata=Values,\r\n\t\t\t\ttype = \"scatter\",\r\n\t\t\t\tmode = \"lines+markers\",\r\n\t\t\t\tname=colnames(Values)[[cols]],\r\n\t\t\t\tshowlegend = legendActive,\r\n\t\t\t\tmarker = list(color = colours[[cols]]),\r\n\t\t\t\tline = list(color = colours[[if(cols %% 6 == 0) 6 else cols %% 6]])\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n####################################################\r\n\r\n############# Create and save widget ###############\r\ninternalSaveWidget(p, 'out.html');\r\n####################################################\r\n"}}}],"objects":{"rcv_script":{"properties":{"provider":{"type":{"text":true}},"source":{"type":{"scripting":{"source":true}}}}},"Legend":{"displayName":"Legend","displayNameKey":"Visual_Legend","properties":{"legendActive":{"displayName":"Toggle Legend","displayNameKey":"Legend_Toggle","type":{"bool":true}}}},"ColourSettings":{"displayName":"Colouring","displayNameKey":"Visual_Colours","properties":{"fill":{"displayName":"Line Colour","displayNameKey":"Visual_Fill","type":{"fill":{"solid":{"color":true}}}},"thresholdActive":{"displayName":"Threshold Colouring","displayNameKey":"Visual_Colour_Active","type":{"bool":true}},"linesActive":{"displayName":"Toggle Threshold Lines","displayNameKey":"Threshold_Lines_Active","type":{"bool":true}},"colour0":{"displayName":"Below Threshold Colour","displayNameKey":"Visual_Threshold_0_Colour","type":{"fill":{"solid":{"color":true}}}},"threshold1":{"displayName":"Threshold 1","displayNameKey":"Visual_Threshold_1_Val","type":{"numeric":true}},"colour1":{"displayName":"Between Threshold Colour","displayNameKey":"Visual_Threshold_1_Colour","type":{"fill":{"solid":{"color":true}}}},"threshold2":{"displayName":"Threshold 2","displayNameKey":"Visual_Threshold_2_Val","type":{"numeric":true}},"colour2":{"displayName":"Above Threshold Colour","displayNameKey":"Visual__Threshold_2_Colour","type":{"fill":{"solid":{"color":true}}}}}}},"suppressDefaultTitle":true},"dependencies":{"cranPackages":[{"name":"ggplot2","displayName":"GG Plot 2","url":"https://cran.r-project.org/web/packages/ggplot2/index.html"},{"name":"plotly","displayName":"Plotly","url":"https://cran.r-project.org/web/packages/plotly/index.html"},{"name":"htmlwidgets","displayName":"HTML Widgets","url":"https://cran.r-project.org/web/packages/htmlwidgets/index.html"},{"name":"XML","displayName":"XML","url":"https://cran.r-project.org/web/packages/XML/index.html"}]},"stringResources":{},"content":{"js":"var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,i){void 0===e&&(e=[]);var r=e;return n(r),t&&(r.identityFields=t),i&&(r.source=i),r}function n(e,t){e.grouped=t?function(){return t}:function(){return i(e)}}function i(e){for(var t,n=[],i=0,r=e.length;r>i;i++){var o=e[i];if(!t||t.identity!==o.identity){if(t={values:[]},o.identity){t.identity=o.identity;var a=o.source;void 0!==a.groupName?t.name=a.groupName:a.displayName&&(t.name=a.displayName)}n.push(t)}t.values.push(o)}return n}e.createValueColumns=t,e.setGrouped=n,e.groupValues=i}(t=e.DataViewTransform||(e.DataViewTransform={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(!e||!e.length)return-1;var n=e[0];if(n.values&&n.values.length>0)for(var r=0,o=n.values.length;o>r;++r){var a=n.values[r];if(a&&a.source&&i(a.source,t))return r}return-1}function n(e,t){if(e&&e.length)for(var n=0,r=e.length;r>n;n++)if(i(e[n].source,t))return n;return-1}function i(e,t){var n=e.roles;return n&&n[t]}function r(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&e.metadata.columns.some(function(e){return e.roles&&void 0!==e.roles[t]})}function o(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=n,e.hasRole=i,e.hasRoleInDataView=r,e.hasRoleInValueColumn=o}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,n){if(!e)return n;var i=e[t];return void 0===i?n:i}function n(e,n,i){var r=t(e,n);return r&&r.solid?r.solid.color:i}e.getValue=t,e.getFillColorByPropertyName=n}(t=e.DataViewObject||(e.DataViewObject={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){function n(t,n,i){return t?e.DataViewObject.getValue(t[n.objectName],n.propertyName,i):i}function i(e,t,n){return e&&e[t]?e[t]:n}function r(e,t,i){var r=n(e,t);return r&&r.solid?r.solid.color:i}function o(e,t,i){var r=n(e,t,i);return r&&r.solid?r.solid.color:void 0===r||null===r||\"object\"==typeof r&&!r.solid?i:r}t.getValue=n,t.getObject=i,t.getFillColor=r,t.getCommonValue=o}(t=e.DataViewObjects||(e.DataViewObjects={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n,i=e.extensibility.utils.dataview.DataRoleHelper;!function(e){function t(e,t,n){if(e.categories&&e.categories.length>0){var r=e.categories[0];return r.source&&i.hasRole(r.source,t)&&i.hasRole(r.source,n)}return!1}function n(e){return void 0!==e.groupName?e.groupName:e.queryName}function r(e){var t=a(e);return null!=t&&t.imageUrl===!0}function o(e){var t=a(e);return null!=t&&t.webUrl===!0}function a(e){return e&&e.type&&e.type.misc}function u(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.columns.length?e.metadata.columns.some(function(e){return r(e)===!0}):!1}e.categoryIsAlsoSeriesRole=t,e.getSeriesName=n,e.isImageUrlColumn=r,e.isWebUrlColumn=o,e.getMiscellaneousTypeDescriptor=a,e.hasImageUrlColumn=u}(n=t.converterHelper||(t.converterHelper={}))}(n=t.dataview||(t.dataview={}))}(n=t.utils||(t.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(){}return t.getDefault=function(){return new this},t.createPropertyIdentifier=function(e,t){return{objectName:e,propertyName:t}},t.parse=function(t){var n,i=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return i;n=i.getProperties();for(var r in n)for(var o in n[r]){var a=i[r][o];i[r][o]=e.DataViewObjects.getCommonValue(t.metadata.objects,n[r][o],a)}return i},t.isPropertyEnumerable=function(e){return!t.InnumerablePropertyPrefix.test(e)},t.enumerateObjectInstances=function(e,t){var n=e&&e[t.objectName];if(!n)return[];var i={objectName:t.objectName,selector:null,properties:{}};for(var r in n)n.hasOwnProperty(r)&&(i.properties[r]=n[r]);return{instances:[i]}},t.prototype.getProperties=function(){var e=this,n={},i=Object.keys(this);return i.forEach(function(i){if(t.isPropertyEnumerable(i)){var r=Object.keys(e[i]);n[i]={},r.forEach(function(e){t.isPropertyEnumerable(i)&&(n[i][e]=t.createPropertyIdentifier(i,e))})}}),n},t}();t.InnumerablePropertyPrefix=/^_/,e.DataViewObjectsParser=t}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){\"use strict\";function t(){a=0}function n(){return 0===a}function i(e,t){var n=[];if(e&&e.hasChildNodes()){for(var i=e.children,o=0;o<i.length;o++){var a=void 0;a=\"script\"===i.item(o).nodeName.toLowerCase()?r(i.item(o)):i.item(o).cloneNode(!0),t.appendChild(a),n.push(a)}return n}}function r(e){for(var t=document.createElement(\"script\"),n=e.attributes,i=0;i<n.length;i++)t.setAttribute(n[i].name,n[i].textContent),\"src\"===n[i].name.toLowerCase()&&(a++,t.onload=function(){a--});return t.innerHTML=e.innerHTML,t}function o(){var e=window.setInterval(function(){n()&&(window.clearInterval(e),window.hasOwnProperty(\"HTMLWidgets\")&&window.HTMLWidgets.staticRender&&window.HTMLWidgets.staticRender())},100)}var a=0;e.ResetInjector=t,e.injectorReady=n,e.ParseElement=i,e.RunHTMLWidgetRenderer=o}(t=e.lineChartRD902E64560EE4B62A6FFD29B1499B69E||(e.lineChartRD902E64560EE4B62A6FFD29B1499B69E={}))}(t=e.visual||(e.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){\"use strict\";var n=e.extensibility.utils.dataview.DataViewObjectsParser,i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ColourSettings=new r,t.Legend=new o,t}return __extends(t,e),t}(n);t.VisualSettings=i;var r=function(){function e(){this.fill=\"#01B8AA\",this.thresholdActive=!1,this.linesActive=!1,this.colour0=\"#FD625E\",this.threshold1=40,this.colour1=\"#F2C80F\",this.threshold2=70,this.colour2=\"#01B8AA\"}return e}();t.ColourSettings=r;var o=function(){function e(){this.legendActive=!0}return e}();t.Legend=o}(n=t.lineChartRD902E64560EE4B62A6FFD29B1499B69E||(t.lineChartRD902E64560EE4B62A6FFD29B1499B69E={}))}(n=t.visual||(t.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){\"use strict\";var n=!1,i=[e.VisualUpdateType.Resize,e.VisualUpdateType.ResizeEnd,e.VisualUpdateType.Resize+e.VisualUpdateType.ResizeEnd],r=function(){function e(e){e&&e.element&&(this.rootElement=e.element),this.headNodes=[],this.bodyNodes=[]}return e.prototype.update=function(t){if(t&&t.type&&t.viewport&&t.dataViews&&0!==t.dataViews.length&&t.dataViews[0]){var n=t.dataViews[0];this.settings=e.parseSettings(n);var r=null;n.scriptResult&&n.scriptResult.payloadBase64&&(r=n.scriptResult.payloadBase64),-1===i.indexOf(t.type)?r&&this.injectCodeFromPayload(r):this.onResizing(t.viewport)}},e.prototype.onResizing=function(e){},e.prototype.injectCodeFromPayload=function(e){if(t.ResetInjector(),e){var i=document.createElement(\"html\");try{i.innerHTML=window.atob(e)}catch(r){return}if(n||0===this.headNodes.length){for(;this.headNodes.length>0;){var o=this.headNodes.pop();document.head.removeChild(o)}var a=i.getElementsByTagName(\"head\");if(a&&a.length>0){var u=a[0];this.headNodes=t.ParseElement(u,document.head)}}for(;this.bodyNodes.length>0;){var o=this.bodyNodes.pop();this.rootElement.removeChild(o)}var s=i.getElementsByTagName(\"body\");if(s&&s.length>0){var l=s[0];this.bodyNodes=t.ParseElement(l,this.rootElement)}t.RunHTMLWidgetRenderer()}},e.parseSettings=function(e){return t.VisualSettings.parse(e)},e.prototype.enumerateObjectInstances=function(e){return t.VisualSettings.enumerateObjectInstances(this.settings||t.VisualSettings.getDefault(),e)},e}();t.Visual=r}(n=t.lineChartRD902E64560EE4B62A6FFD29B1499B69E||(t.lineChartRD902E64560EE4B62A6FFD29B1499B69E={}))}(n=t.visual||(t.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var n;!function(t){t.lineChartRD902E64560EE4B62A6FFD29B1499B69E={name:\"lineChartRD902E64560EE4B62A6FFD29B1499B69E\",displayName:\"LineChartR\",\"class\":\"Visual\",version:\"1.0.0\",apiVersion:\"1.11.0\",create:function(t){return new e.extensibility.visual.lineChartRD902E64560EE4B62A6FFD29B1499B69E.Visual(t)},custom:!0}}(n=t.plugins||(t.plugins={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));","css":".visual-lineChartRD902E64560EE4B62A6FFD29B1499B69E .rcv_autoScaleImageContainer{position:relative}.visual-lineChartRD902E64560EE4B62A6FFD29B1499B69E .rcv_autoScaleImageContainer .rcv_autoScaleImage{max-width:100%;max-height:100%;position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);-webkit-transform:translateY(-50%) translateX(-50%)}","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAF96VFh0UmF3IHByb2ZpbGUgdHlwZSBBUFAxAAAImeNKT81LLcpMVigoyk/LzEnlUgADYxMuE0sTS6NEAwMDCwMIMDQwMDYEkkZAtjlUKNEABZgamFmaGZsZmgMxiM8FAEi2FMk61EMyAAAB7UlEQVQ4jeWRv2tTURiGn/fce2Psj9CKWosEFXFU/AOEQqkpvQ7iIB3ddXO2BMHJP8HN0YJOoYEuqYNrnYUu0iqWKpYa4zX35nwONwltk2Khi+ALB77Deb/nfOc98H/IZsJeqZOBUJnFNsiBmVDqTgQUBnICR76KJwPmYypnS4bZUODq6uporVab/DsLgSwvLRPSQIYrKysZgBPOUGdhYSEaxrpkD4qepCkUAN/BXfWkyQHg8vJyMD4+ntL9LDP534Xw/L25uW+HJyuz+FPotGGdTV5FeZ55kH2NjY1NA7r7/rbF6/NI5t58vhL0curBprh/OYfhU7jegwGE+4GSPgIEmFIgXp/H2mpSJeApWe6aCQoEG92OG18obexn9Ces1+ut3v71zcYtM7yZjIjm/ovLTDUFzrBsk90N9CIdAHZhRYCC87NxXHnHExdg3adEtKjayJnNZxeFO2VYp01yDVodDsk1Go2zQADIez89W4nX+qdLCvrpFNs/Ri982PJpgQQ/sc3uFnqbDQCTJPkEFMysFcfxtiQ74FiSA4SPpDDFRSk7aw+zYTCA0MwCSVgYzg4zAGB4hLaev8RnkTGh8ChrWCqVJvf29op3KpWdI4HCMJlPCw7DeKTm0dbjqmpFIs4xwlce69ex+/45/QEAB7rmIifQHgAAAABJRU5ErkJggg=="}}